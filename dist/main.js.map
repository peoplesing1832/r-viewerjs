{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/index.ts","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack:///./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/viewerjs/dist/viewer.js","webpack:///./node_modules/viewerjs/dist/viewer.min.css?38ce"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","image","options","viewer","Array","isArray","errImg","args","ele","images","ul","document","createElement","fragment","createDocumentFragment","forEach","index","li","imgEle","entries","setAttribute","addEventListener","update","view","appendChild","Viewer","obj","configurable","writable","objectWithoutPropertiesLoose","source","excluded","target","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","sourceKeys","keys","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","err","arrayLikeToArray","minLen","toString","slice","constructor","from","test","len","arr2","TypeError","_typeof","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_defineProperty","ownKeys","enumerableOnly","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","arguments","getOwnPropertyDescriptors","defineProperties","DEFAULTS","backdrop","button","navbar","title","toolbar","className","container","fullscreen","inheritedAttributes","initialViewIndex","inline","interval","keyboard","focus","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","viewed","move","moved","rotate","rotated","scale","scaled","zoom","zoomed","play","stop","IS_BROWSER","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","CLASS_ACTIVE","concat","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_TOUCH_END","EVENT_TOUCH_MOVE","EVENT_TOUCH_START","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","isNaN","Number","isNumber","isUndefined","isObject","isPlainObject","_constructor","error","isFunction","data","callback","assign","_len","_key","arg","REGEXP_SUFFIX","setStyle","element","styles","style","escapeHTMLEntities","replace","hasClass","classList","contains","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","dataset","getAttribute","setData","onceSupported","supported","once","listener","set","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","_handler","_element$listeners","_len2","_key2","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","_ref","scaleX","scaleY","translateX","translateY","values","transform","join","WebkitTransform","msTransform","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","newImage","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","getResponsiveClass","getPointer","_ref2","endOnly","pageX","pageY","end","endX","endY","timeStamp","Date","now","startX","startY","getPointersCenter","pointers","count","_ref3","id","render","this","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","viewerData","parent","Math","max","offsetWidth","offsetHeight","parentData","fulled","_this","list","items","innerHTML","alt","decodeURIComponent","getImageNameFromURL","getImageURL","item","img","firstElementChild","loadImage","renderList","outerWidth","resetList","initImage","sizingImage","_this2","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","imageInitializing","abort","aspectRatio","min","x","y","ratio","initialImageData","renderImage","_this3","marginLeft","marginTop","viewing","moving","rotating","scaling","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","events","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","handlers","action","localName","parentElement","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","toggle","reset","prev","preventDefault","doubleClickImageTimeout","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","ctrlKey","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","pointerId","isSwitchable","change","pointer","imageClicked","setTimeout","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","_this4","wheeling","delta","deltaY","wheelDelta","methods","immediate","build","transitioning","removeAttribute","initialOffsetWidth","hideImmediately","onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","activeItem","onLoad","onViewed","complete","maxIndex","moveTo","_originalEvent","oldX","oldY","changed","originalEvent","degree","rotateTo","oldDegree","_scaleX","_scaleY","_this5","oldScaleX","oldScaleY","hasTooltip","_this6","_zoomable","newWidth","newHeight","oldRatio","offset","center","_this7","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","playing","_this8","exitFullscreen","_this9","enforceFocus","_this10","clearEnforceFocus","_this11","tooltipBox","textContent","round","tooltipping","fading","_this12","isImg","destroy","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","others","onFocusin","parseFloat","fucus","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","offsetX","offsetY","pointers2","ratios","pointer2","x1","abs","y1","x2","y2","z1","sqrt","sort","a","b","getMaxZoomRatio","absoluteOffsetX","AnotherViewer","getUniqueID","nodeType","Error","init","protoProps","staticProps","progress","template","custom","zoomButtons","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fast-viewerjs\"] = factory();\n\telse\n\t\troot[\"fast-viewerjs\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import Viewer from 'viewerjs';\nimport 'viewerjs/dist/viewer.min.css';\n\ntype Image = Partial<Omit<HTMLImageElement, 'src'>> & {\n  src: string;\n};\n\ntype Options = Viewer.Options & {\n  errImg?: string;\n}\n\nconst createElement = (\n  images: Image[],\n  errImg: string,\n  viewer: Viewer\n) => {\n  const ul = document.createElement('ul');\n  const fragment = document.createDocumentFragment();\n  images.forEach((image, index) => {\n    const li = document.createElement('li');\n    const imgEle = document.createElement('img');\n    const entries = Object.entries(image);\n    entries.forEach(([key, value]) => imgEle.setAttribute(key, value as any));\n    if (errImg) {\n      imgEle.addEventListener('error', () => {\n        image.setAttribute('src', errImg);\n        viewer.update();\n        viewer.view(index);\n      });\n    }\n    fragment.appendChild(li.appendChild(imgEle));\n  });\n  ul.appendChild(fragment);\n  return ul;\n};\n\nconst createViewer = (\n  image: Image | Image[],\n  options?: Options,\n) => {\n  if (!Array.isArray(image)) {\n    image = [image]\n  }\n  let viewer!:Viewer;\n  const { errImg = '', ...args } = options || {};\n\n  const ele = createElement(image, errImg, viewer);\n  viewer = new Viewer(ele, {\n    ...args,\n  });\n  return viewer;\n};\n\nexport default createViewer;\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","/*!\n * Viewer.js v1.9.0\n * https://fengyuanchen.github.io/viewerjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2020-12-06T11:25:15.688Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Viewer = factory());\n}(this, (function () { 'use strict';\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var DEFAULTS = {\n    /**\n     * Enable a modal backdrop, specify `static` for a backdrop\n     * which doesn't close the modal on click.\n     * @type {boolean}\n     */\n    backdrop: true,\n\n    /**\n     * Show the button on the top-right of the viewer.\n     * @type {boolean}\n     */\n    button: true,\n\n    /**\n     * Show the navbar.\n     * @type {boolean | number}\n     */\n    navbar: true,\n\n    /**\n     * Specify the visibility and the content of the title.\n     * @type {boolean | number | Function | Array}\n     */\n    title: true,\n\n    /**\n     * Show the toolbar.\n     * @type {boolean | number | Object}\n     */\n    toolbar: true,\n\n    /**\n     * Custom class name(s) to add to the viewer's root element.\n     * @type {string}\n     */\n    className: '',\n\n    /**\n     * Define where to put the viewer in modal mode.\n     * @type {string | Element}\n     */\n    container: 'body',\n\n    /**\n     * Filter the images for viewing. Return true if the image is viewable.\n     * @type {Function}\n     */\n    filter: null,\n\n    /**\n     * Enable to request fullscreen when play.\n     * @type {boolean}\n     */\n    fullscreen: true,\n\n    /**\n     * Define the extra attributes to inherit from the original image.\n     * @type {Array}\n     */\n    inheritedAttributes: ['crossOrigin', 'decoding', 'isMap', 'loading', 'referrerPolicy', 'sizes', 'srcset', 'useMap'],\n\n    /**\n     * Define the initial index of image for viewing.\n     * @type {number}\n     */\n    initialViewIndex: 0,\n\n    /**\n     * Enable inline mode.\n     * @type {boolean}\n     */\n    inline: false,\n\n    /**\n     * The amount of time to delay between automatically cycling an image when playing.\n     * @type {number}\n     */\n    interval: 5000,\n\n    /**\n     * Enable keyboard support.\n     * @type {boolean}\n     */\n    keyboard: true,\n\n    /**\n     * Focus the viewer when initialized.\n     * @type {boolean}\n     */\n    focus: true,\n\n    /**\n     * Indicate if show a loading spinner when load image or not.\n     * @type {boolean}\n     */\n    loading: true,\n\n    /**\n     * Indicate if enable loop viewing or not.\n     * @type {boolean}\n     */\n    loop: true,\n\n    /**\n     * Min width of the viewer in inline mode.\n     * @type {number}\n     */\n    minWidth: 200,\n\n    /**\n     * Min height of the viewer in inline mode.\n     * @type {number}\n     */\n    minHeight: 100,\n\n    /**\n     * Enable to move the image.\n     * @type {boolean}\n     */\n    movable: true,\n\n    /**\n     * Enable to rotate the image.\n     * @type {boolean}\n     */\n    rotatable: true,\n\n    /**\n     * Enable to scale the image.\n     * @type {boolean}\n     */\n    scalable: true,\n\n    /**\n     * Enable to zoom the image.\n     * @type {boolean}\n     */\n    zoomable: true,\n\n    /**\n     * Enable to zoom the current image by dragging on the touch screen.\n     * @type {boolean}\n     */\n    zoomOnTouch: true,\n\n    /**\n     * Enable to zoom the image by wheeling mouse.\n     * @type {boolean}\n     */\n    zoomOnWheel: true,\n\n    /**\n     * Enable to slide to the next or previous image by swiping on the touch screen.\n     * @type {boolean}\n     */\n    slideOnTouch: true,\n\n    /**\n     * Indicate if toggle the image size between its natural size\n     * and initial size when double click on the image or not.\n     * @type {boolean}\n     */\n    toggleOnDblclick: true,\n\n    /**\n     * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n     * @type {boolean}\n     */\n    tooltip: true,\n\n    /**\n     * Enable CSS3 Transition for some special elements.\n     * @type {boolean}\n     */\n    transition: true,\n\n    /**\n     * Define the CSS `z-index` value of viewer in modal mode.\n     * @type {number}\n     */\n    zIndex: 2015,\n\n    /**\n     * Define the CSS `z-index` value of viewer in inline mode.\n     * @type {number}\n     */\n    zIndexInline: 0,\n\n    /**\n     * Define the ratio when zoom the image by wheeling mouse.\n     * @type {number}\n     */\n    zoomRatio: 0.1,\n\n    /**\n     * Define the min ratio of the image when zoom out.\n     * @type {number}\n     */\n    minZoomRatio: 0.01,\n\n    /**\n     * Define the max ratio of the image when zoom in.\n     * @type {number}\n     */\n    maxZoomRatio: 100,\n\n    /**\n     * Define where to get the original image URL for viewing.\n     * @type {string | Function}\n     */\n    url: 'src',\n\n    /**\n     * Event shortcuts.\n     * @type {Function}\n     */\n    ready: null,\n    show: null,\n    shown: null,\n    hide: null,\n    hidden: null,\n    view: null,\n    viewed: null,\n    move: null,\n    moved: null,\n    rotate: null,\n    rotated: null,\n    scale: null,\n    scaled: null,\n    zoom: null,\n    zoomed: null,\n    play: null,\n    stop: null\n  };\n\n  var TEMPLATE = '<div class=\"viewer-container\" tabindex=\"-1\" touch-action=\"none\">' + '<div class=\"viewer-canvas\"></div>' + '<div class=\"viewer-footer\">' + '<div class=\"viewer-title\"></div>' + '<div class=\"viewer-toolbar\"></div>' + '<div class=\"viewer-navbar\">' + '<ul class=\"viewer-list\" role=\"navigation\"></ul>' + '</div>' + '</div>' + '<div class=\"viewer-tooltip\" role=\"alert\" aria-hidden=\"true\"></div>' + '<div class=\"viewer-button\" data-viewer-action=\"mix\" role=\"button\"></div>' + '<div class=\"viewer-player\"></div>' + '</div>';\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'viewer'; // Actions\n\n  var ACTION_MOVE = 'move';\n  var ACTION_SWITCH = 'switch';\n  var ACTION_ZOOM = 'zoom'; // Classes\n\n  var CLASS_ACTIVE = \"\".concat(NAMESPACE, \"-active\");\n  var CLASS_CLOSE = \"\".concat(NAMESPACE, \"-close\");\n  var CLASS_FADE = \"\".concat(NAMESPACE, \"-fade\");\n  var CLASS_FIXED = \"\".concat(NAMESPACE, \"-fixed\");\n  var CLASS_FULLSCREEN = \"\".concat(NAMESPACE, \"-fullscreen\");\n  var CLASS_FULLSCREEN_EXIT = \"\".concat(NAMESPACE, \"-fullscreen-exit\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_HIDE_MD_DOWN = \"\".concat(NAMESPACE, \"-hide-md-down\");\n  var CLASS_HIDE_SM_DOWN = \"\".concat(NAMESPACE, \"-hide-sm-down\");\n  var CLASS_HIDE_XS_DOWN = \"\".concat(NAMESPACE, \"-hide-xs-down\");\n  var CLASS_IN = \"\".concat(NAMESPACE, \"-in\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_LOADING = \"\".concat(NAMESPACE, \"-loading\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n  var CLASS_OPEN = \"\".concat(NAMESPACE, \"-open\");\n  var CLASS_SHOW = \"\".concat(NAMESPACE, \"-show\");\n  var CLASS_TRANSITION = \"\".concat(NAMESPACE, \"-transition\"); // Native events\n\n  var EVENT_CLICK = 'click';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_DRAG_START = 'dragstart';\n  var EVENT_FOCUSIN = 'focusin';\n  var EVENT_KEY_DOWN = 'keydown';\n  var EVENT_LOAD = 'load';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_RESIZE = 'resize';\n  var EVENT_TRANSITION_END = 'transitionend';\n  var EVENT_WHEEL = 'wheel'; // Custom events\n\n  var EVENT_READY = 'ready';\n  var EVENT_SHOW = 'show';\n  var EVENT_SHOWN = 'shown';\n  var EVENT_HIDE = 'hide';\n  var EVENT_HIDDEN = 'hidden';\n  var EVENT_VIEW = 'view';\n  var EVENT_VIEWED = 'viewed';\n  var EVENT_MOVE = 'move';\n  var EVENT_MOVED = 'moved';\n  var EVENT_ROTATE = 'rotate';\n  var EVENT_ROTATED = 'rotated';\n  var EVENT_SCALE = 'scale';\n  var EVENT_SCALED = 'scaled';\n  var EVENT_ZOOM = 'zoom';\n  var EVENT_ZOOMED = 'zoomed';\n  var EVENT_PLAY = 'play';\n  var EVENT_STOP = 'stop'; // Data keys\n\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\"); // RegExps\n\n  var REGEXP_SPACES = /\\s\\s*/; // Misc\n\n  var BUTTONS = ['zoom-in', 'zoom-out', 'one-to-one', 'reset', 'prev', 'play', 'next', 'rotate-left', 'rotate-right', 'flip-horizontal', 'flip-vertical'];\n\n  /**\n   * Check if the given value is a string.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n   */\n\n  function isString(value) {\n    return typeof value === 'string';\n  }\n  /**\n   * Check if the given value is not a number.\n   */\n\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length)\n      /* array-like */\n      ) {\n          var length = data.length;\n          var i;\n\n          for (i = 0; i < length; i += 1) {\n            if (callback.call(data, data[i], i, data) === false) {\n              break;\n            }\n          }\n        } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n\n    return data;\n  }\n  /**\n   * Extend the given object.\n   * @param {*} obj - The object to be extended.\n   * @param {*} args - The rest objects which will be merged to the first object.\n   * @returns {Object} The extended object.\n   */\n\n  var assign = Object.assign || function assign(obj) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n\n    if (isObject(obj) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            obj[key] = arg[key];\n          });\n        }\n      });\n    }\n\n    return obj;\n  };\n  var REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value += 'px';\n      }\n\n      style[property] = value;\n    });\n  }\n  /**\n   * Escape a string for using in HTML.\n   * @param {String} value - The string to escape.\n   * @returns {String} Returns the escaped string.\n   */\n\n  function escapeHTMLEntities(value) {\n    return isString(value) ? value.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;') : value;\n  }\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n\n  function hasClass(element, value) {\n    if (!element || !value) {\n      return false;\n    }\n\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n\n  function addClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n\n    var className = element.className.trim();\n\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n\n  function removeClass(element, value) {\n    if (!element || !value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    } // IE10-11 doesn't support the second parameter of `classList.toggle`\n\n\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n\n  function hyphenate(value) {\n    return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n  }\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n\n    return element.getAttribute(\"data-\".concat(hyphenate(name)));\n  }\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(hyphenate(name)), data);\n    }\n  }\n\n  var onceSupported = function () {\n    var supported = false;\n\n    if (IS_BROWSER) {\n      var once = false;\n\n      var listener = function listener() {};\n\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n\n    return supported;\n  }();\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n\n      element.removeEventListener(event, handler, options);\n    });\n  }\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n            listeners = _element$listeners === void 0 ? {} : _element$listeners;\n\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n\n          listener.apply(element, args);\n        };\n\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n\n      element.addEventListener(event, _handler, options);\n    });\n  }\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @param {Object} options - The additional event options.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n\n  function dispatchEvent(element, type, data, options) {\n    var event; // Event and CustomEvent on IE9-11 are global objects, not constructors\n\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, _objectSpread2({\n        bubbles: true,\n        cancelable: true,\n        detail: data\n      }, options));\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    return element.dispatchEvent(event);\n  }\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n        scaleX = _ref.scaleX,\n        scaleY = _ref.scaleY,\n        translateX = _ref.translateX,\n        translateY = _ref.translateY;\n    var values = [];\n\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    } // Rotate should come first before scale to match orientation transform\n\n\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n  /**\n   * Get an image name from an image url.\n   * @param {string} url - The target url.\n   * @example\n   * // picture.jpg\n   * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n   * @returns {string} A string contains the image name.\n   */\n\n  function getImageNameFromURL(url) {\n    return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n  }\n  var IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n  /**\n   * Get an image's natural sizes.\n   * @param {string} image - The target image.\n   * @param {Object} options - The viewer options.\n   * @param {Function} callback - The callback function.\n   * @returns {HTMLImageElement} The new image.\n   */\n\n  function getImageNaturalSizes(image, options, callback) {\n    var newImage = document.createElement('img'); // Modern browsers (except Safari)\n\n    if (image.naturalWidth && !IS_SAFARI) {\n      callback(image.naturalWidth, image.naturalHeight);\n      return newImage;\n    }\n\n    var body = document.body || document.documentElement;\n\n    newImage.onload = function () {\n      callback(newImage.width, newImage.height);\n\n      if (!IS_SAFARI) {\n        body.removeChild(newImage);\n      }\n    };\n\n    forEach(options.inheritedAttributes, function (name) {\n      var value = image.getAttribute(name);\n\n      if (value !== null) {\n        newImage.setAttribute(name, value);\n      }\n    });\n    newImage.src = image.src; // iOS Safari will convert the image automatically\n    // with its orientation once append it into DOM\n\n    if (!IS_SAFARI) {\n      newImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n      body.appendChild(newImage);\n    }\n\n    return newImage;\n  }\n  /**\n   * Get the related class name of a responsive type number.\n   * @param {string} type - The responsive type.\n   * @returns {string} The related class name.\n   */\n\n  function getResponsiveClass(type) {\n    switch (type) {\n      case 2:\n        return CLASS_HIDE_XS_DOWN;\n\n      case 3:\n        return CLASS_HIDE_SM_DOWN;\n\n      case 4:\n        return CLASS_HIDE_MD_DOWN;\n\n      default:\n        return '';\n    }\n  }\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n\n    var ratios = [];\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        ratios.push(ratio);\n      });\n    });\n    ratios.sort(function (a, b) {\n      return Math.abs(a) < Math.abs(b);\n    });\n    return ratios[0];\n  }\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n        pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      timeStamp: Date.now(),\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n          startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initViewer();\n      this.initList();\n      this.renderViewer();\n    },\n    initBody: function initBody() {\n      var ownerDocument = this.element.ownerDocument;\n      var body = ownerDocument.body || ownerDocument.documentElement;\n      this.body = body;\n      this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n      this.initialBodyPaddingRight = body.style.paddingRight;\n      this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n    },\n    initContainer: function initContainer() {\n      this.containerData = {\n        width: window.innerWidth,\n        height: window.innerHeight\n      };\n    },\n    initViewer: function initViewer() {\n      var options = this.options,\n          parent = this.parent;\n      var viewerData;\n\n      if (options.inline) {\n        viewerData = {\n          width: Math.max(parent.offsetWidth, options.minWidth),\n          height: Math.max(parent.offsetHeight, options.minHeight)\n        };\n        this.parentData = viewerData;\n      }\n\n      if (this.fulled || !viewerData) {\n        viewerData = this.containerData;\n      }\n\n      this.viewerData = assign({}, viewerData);\n    },\n    renderViewer: function renderViewer() {\n      if (this.options.inline && !this.fulled) {\n        setStyle(this.viewer, this.viewerData);\n      }\n    },\n    initList: function initList() {\n      var _this = this;\n\n      var element = this.element,\n          options = this.options,\n          list = this.list;\n      var items = []; // initList may be called in this.update, so should keep idempotent\n\n      list.innerHTML = '';\n      forEach(this.images, function (image, index) {\n        var src = image.src;\n        var alt = image.alt || getImageNameFromURL(src);\n\n        var url = _this.getImageURL(image);\n\n        if (src || url) {\n          var item = document.createElement('li');\n          var img = document.createElement('img');\n          forEach(options.inheritedAttributes, function (name) {\n            var value = image.getAttribute(name);\n\n            if (value !== null) {\n              img.setAttribute(name, value);\n            }\n          });\n          img.src = src || url;\n          img.alt = alt;\n          img.setAttribute('data-original-url', url || src);\n          item.setAttribute('data-index', index);\n          item.setAttribute('data-viewer-action', 'view');\n          item.setAttribute('role', 'button');\n\n          if (options.keyboard) {\n            item.setAttribute('tabindex', 0);\n          }\n\n          item.appendChild(img);\n          list.appendChild(item);\n          items.push(item);\n        }\n      });\n      this.items = items;\n      forEach(items, function (item) {\n        var image = item.firstElementChild;\n        setData(image, 'filled', true);\n\n        if (options.loading) {\n          addClass(item, CLASS_LOADING);\n        }\n\n        addListener(image, EVENT_LOAD, function (event) {\n          if (options.loading) {\n            removeClass(item, CLASS_LOADING);\n          }\n\n          _this.loadImage(event);\n        }, {\n          once: true\n        });\n      });\n\n      if (options.transition) {\n        addListener(element, EVENT_VIEWED, function () {\n          addClass(list, CLASS_TRANSITION);\n        }, {\n          once: true\n        });\n      }\n    },\n    renderList: function renderList(index) {\n      var i = index || this.index;\n      var width = this.items[i].offsetWidth || 30;\n      var outerWidth = width + 1; // 1 pixel of `margin-left` width\n      // Place the active item in the center of the screen\n\n      setStyle(this.list, assign({\n        width: outerWidth * this.length\n      }, getTransforms({\n        translateX: (this.viewerData.width - width) / 2 - outerWidth * i\n      })));\n    },\n    resetList: function resetList() {\n      var list = this.list;\n      list.innerHTML = '';\n      removeClass(list, CLASS_TRANSITION);\n      setStyle(list, getTransforms({\n        translateX: 0\n      }));\n    },\n    initImage: function initImage(done) {\n      var _this2 = this;\n\n      var options = this.options,\n          image = this.image,\n          viewerData = this.viewerData;\n      var footerHeight = this.footer.offsetHeight;\n      var viewerWidth = viewerData.width;\n      var viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n      var oldImageData = this.imageData || {};\n      var sizingImage;\n      this.imageInitializing = {\n        abort: function abort() {\n          sizingImage.onload = null;\n        }\n      };\n      sizingImage = getImageNaturalSizes(image, options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = viewerWidth;\n        var height = viewerHeight;\n        _this2.imageInitializing = false;\n\n        if (viewerHeight * aspectRatio > viewerWidth) {\n          height = viewerWidth / aspectRatio;\n        } else {\n          width = viewerHeight * aspectRatio;\n        }\n\n        width = Math.min(width * 0.9, naturalWidth);\n        height = Math.min(height * 0.9, naturalHeight);\n        var left = (viewerWidth - width) / 2;\n        var top = (viewerHeight - height) / 2;\n        var imageData = {\n          left: left,\n          top: top,\n          x: left,\n          y: top,\n          width: width,\n          height: height,\n          ratio: width / naturalWidth,\n          aspectRatio: aspectRatio,\n          naturalWidth: naturalWidth,\n          naturalHeight: naturalHeight\n        };\n        var initialImageData = assign({}, imageData);\n\n        if (options.rotatable) {\n          imageData.rotate = oldImageData.rotate || 0;\n          initialImageData.rotate = 0;\n        }\n\n        if (options.scalable) {\n          imageData.scaleX = oldImageData.scaleX || 1;\n          imageData.scaleY = oldImageData.scaleY || 1;\n          initialImageData.scaleX = 1;\n          initialImageData.scaleY = 1;\n        }\n\n        _this2.imageData = imageData;\n        _this2.initialImageData = initialImageData;\n\n        if (done) {\n          done();\n        }\n      });\n    },\n    renderImage: function renderImage(done) {\n      var _this3 = this;\n\n      var image = this.image,\n          imageData = this.imageData;\n      setStyle(image, assign({\n        width: imageData.width,\n        height: imageData.height,\n        // XXX: Not to use translateX/Y to avoid image shaking when zooming\n        marginLeft: imageData.x,\n        marginTop: imageData.y\n      }, getTransforms(imageData)));\n\n      if (done) {\n        if ((this.viewing || this.moving || this.rotating || this.scaling || this.zooming) && this.options.transition && hasClass(image, CLASS_TRANSITION)) {\n          var onTransitionEnd = function onTransitionEnd() {\n            _this3.imageRendering = false;\n            done();\n          };\n\n          this.imageRendering = {\n            abort: function abort() {\n              removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n            }\n          };\n          addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n            once: true\n          });\n        } else {\n          done();\n        }\n      }\n    },\n    resetImage: function resetImage() {\n      // this.image only defined after viewed\n      if (this.viewing || this.viewed) {\n        var image = this.image;\n\n        if (this.viewing) {\n          this.viewing.abort();\n        }\n\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      addListener(viewer, EVENT_CLICK, this.onClick = this.click.bind(this));\n      addListener(viewer, EVENT_DRAG_START, this.onDragStart = this.dragstart.bind(this));\n      addListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown = this.pointerdown.bind(this));\n      addListener(document, EVENT_POINTER_MOVE, this.onPointerMove = this.pointermove.bind(this));\n      addListener(document, EVENT_POINTER_UP, this.onPointerUp = this.pointerup.bind(this));\n      addListener(document, EVENT_KEY_DOWN, this.onKeyDown = this.keydown.bind(this));\n      addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(viewer, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        addListener(canvas, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var options = this.options,\n          viewer = this.viewer,\n          canvas = this.canvas;\n      var document = this.element.ownerDocument;\n      removeListener(viewer, EVENT_CLICK, this.onClick);\n      removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n      removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n      removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n      removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n      removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n      removeListener(window, EVENT_RESIZE, this.onResize);\n\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n\n      if (options.toggleOnDblclick) {\n        removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n      }\n    }\n  };\n\n  var handlers = {\n    click: function click(event) {\n      var options = this.options,\n          imageData = this.imageData;\n      var target = event.target;\n      var action = getData(target, DATA_ACTION);\n\n      if (!action && target.localName === 'img' && target.parentElement.localName === 'li') {\n        target = target.parentElement;\n        action = getData(target, DATA_ACTION);\n      } // Cancel the emulated click when the native click event was triggered.\n\n\n      if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n        clearTimeout(this.clickCanvasTimeout);\n      }\n\n      switch (action) {\n        case 'mix':\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            } else {\n              this.full();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n\n        case 'hide':\n          this.hide();\n          break;\n\n        case 'view':\n          this.view(getData(target, 'index'));\n          break;\n\n        case 'zoom-in':\n          this.zoom(0.1, true);\n          break;\n\n        case 'zoom-out':\n          this.zoom(-0.1, true);\n          break;\n\n        case 'one-to-one':\n          this.toggle();\n          break;\n\n        case 'reset':\n          this.reset();\n          break;\n\n        case 'prev':\n          this.prev(options.loop);\n          break;\n\n        case 'play':\n          this.play(options.fullscreen);\n          break;\n\n        case 'next':\n          this.next(options.loop);\n          break;\n\n        case 'rotate-left':\n          this.rotate(-90);\n          break;\n\n        case 'rotate-right':\n          this.rotate(90);\n          break;\n\n        case 'flip-horizontal':\n          this.scaleX(-imageData.scaleX || -1);\n          break;\n\n        case 'flip-vertical':\n          this.scaleY(-imageData.scaleY || -1);\n          break;\n\n        default:\n          if (this.played) {\n            this.stop();\n          }\n\n      }\n    },\n    dblclick: function dblclick(event) {\n      event.preventDefault();\n\n      if (this.viewed && event.target === this.image) {\n        // Cancel the emulated double click when the native dblclick event was triggered.\n        if (IS_TOUCH_DEVICE && event.isTrusted) {\n          clearTimeout(this.doubleClickImageTimeout);\n        }\n\n        this.toggle();\n      }\n    },\n    load: function load() {\n      var _this = this;\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n        this.timeout = false;\n      }\n\n      var element = this.element,\n          options = this.options,\n          image = this.image,\n          index = this.index,\n          viewerData = this.viewerData;\n      removeClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        removeClass(this.canvas, CLASS_LOADING);\n      }\n\n      image.style.cssText = 'height:0;' + \"margin-left:\".concat(viewerData.width / 2, \"px;\") + \"margin-top:\".concat(viewerData.height / 2, \"px;\") + 'max-width:none!important;' + 'position:absolute;' + 'width:0;';\n      this.initImage(function () {\n        toggleClass(image, CLASS_MOVE, options.movable);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        _this.renderImage(function () {\n          _this.viewed = true;\n          _this.viewing = false;\n\n          if (isFunction(options.viewed)) {\n            addListener(element, EVENT_VIEWED, options.viewed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_VIEWED, {\n            originalImage: _this.images[index],\n            index: index,\n            image: image\n          }, {\n            cancelable: false\n          });\n        });\n      });\n    },\n    loadImage: function loadImage(event) {\n      var image = event.target;\n      var parent = image.parentNode;\n      var parentWidth = parent.offsetWidth || 30;\n      var parentHeight = parent.offsetHeight || 50;\n      var filled = !!getData(image, 'filled');\n      getImageNaturalSizes(image, this.options, function (naturalWidth, naturalHeight) {\n        var aspectRatio = naturalWidth / naturalHeight;\n        var width = parentWidth;\n        var height = parentHeight;\n\n        if (parentHeight * aspectRatio > parentWidth) {\n          if (filled) {\n            width = parentHeight * aspectRatio;\n          } else {\n            height = parentWidth / aspectRatio;\n          }\n        } else if (filled) {\n          height = parentWidth / aspectRatio;\n        } else {\n          width = parentHeight * aspectRatio;\n        }\n\n        setStyle(image, assign({\n          width: width,\n          height: height\n        }, getTransforms({\n          translateX: (parentWidth - width) / 2,\n          translateY: (parentHeight - height) / 2\n        })));\n      });\n    },\n    keydown: function keydown(event) {\n      var options = this.options;\n\n      if (!options.keyboard) {\n        return;\n      }\n\n      var keyCode = event.keyCode || event.which || event.charCode;\n\n      switch (keyCode) {\n        // Enter\n        case 13:\n          if (this.viewer.contains(event.target)) {\n            this.click(event);\n          }\n\n          break;\n      }\n\n      if (!this.fulled) {\n        return;\n      }\n\n      switch (keyCode) {\n        // Escape\n        case 27:\n          if (this.played) {\n            this.stop();\n          } else if (options.inline) {\n            if (this.fulled) {\n              this.exit();\n            }\n          } else {\n            this.hide();\n          }\n\n          break;\n        // Space\n\n        case 32:\n          if (this.played) {\n            this.stop();\n          }\n\n          break;\n        // ArrowLeft\n\n        case 37:\n          this.prev(options.loop);\n          break;\n        // ArrowUp\n\n        case 38:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom in\n\n          this.zoom(options.zoomRatio, true);\n          break;\n        // ArrowRight\n\n        case 39:\n          this.next(options.loop);\n          break;\n        // ArrowDown\n\n        case 40:\n          // Prevent scroll on Firefox\n          event.preventDefault(); // Zoom out\n\n          this.zoom(-options.zoomRatio, true);\n          break;\n        // Ctrl + 0\n\n        case 48: // Fall through\n        // Ctrl + 1\n        // eslint-disable-next-line no-fallthrough\n\n        case 49:\n          if (event.ctrlKey) {\n            event.preventDefault();\n            this.toggle();\n          }\n\n          break;\n      }\n    },\n    dragstart: function dragstart(event) {\n      if (event.target.localName === 'img') {\n        event.preventDefault();\n      }\n    },\n    pointerdown: function pointerdown(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var buttons = event.buttons,\n          button = event.button;\n\n      if (!this.viewed || this.showing || this.viewing || this.hiding // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && ( // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 // Open context menu\n      || event.ctrlKey)) {\n        return;\n      } // Prevent default behaviours as page zooming in touch devices.\n\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n\n      var action = options.movable ? ACTION_MOVE : false;\n\n      if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n        action = ACTION_ZOOM;\n      } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n        action = ACTION_SWITCH;\n      }\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        removeClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = action;\n    },\n    pointermove: function pointermove(event) {\n      var pointers = this.pointers,\n          action = this.action;\n\n      if (!this.viewed || !action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n\n      this.change(event);\n    },\n    pointerup: function pointerup(event) {\n      var _this2 = this;\n\n      var options = this.options,\n          action = this.action,\n          pointers = this.pointers;\n      var pointer;\n\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          pointer = pointers[touch.identifier];\n          delete pointers[touch.identifier];\n        });\n      } else {\n        pointer = pointers[event.pointerId || 0];\n        delete pointers[event.pointerId || 0];\n      }\n\n      if (!action) {\n        return;\n      }\n\n      event.preventDefault();\n\n      if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n        addClass(this.image, CLASS_TRANSITION);\n      }\n\n      this.action = false; // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n\n      if (IS_TOUCH_DEVICE && action !== ACTION_ZOOM && pointer && Date.now() - pointer.timeStamp < 500) {\n        clearTimeout(this.clickCanvasTimeout);\n        clearTimeout(this.doubleClickImageTimeout);\n\n        if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n          if (this.imageClicked) {\n            this.imageClicked = false; // This timeout will be cleared later when a native dblclick event is triggering\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              dispatchEvent(_this2.image, EVENT_DBLCLICK);\n            }, 50);\n          } else {\n            this.imageClicked = true; // The default timing of a double click in Windows is 500 ms\n\n            this.doubleClickImageTimeout = setTimeout(function () {\n              _this2.imageClicked = false;\n            }, 500);\n          }\n        } else {\n          this.imageClicked = false;\n\n          if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n            // This timeout will be cleared later when a native click event is triggering\n            this.clickCanvasTimeout = setTimeout(function () {\n              dispatchEvent(_this2.canvas, EVENT_CLICK);\n            }, 50);\n          }\n        }\n      }\n    },\n    resize: function resize() {\n      var _this3 = this;\n\n      if (!this.isShown || this.hiding) {\n        return;\n      }\n\n      if (this.fulled) {\n        this.close();\n        this.initBody();\n        this.open();\n      }\n\n      this.initContainer();\n      this.initViewer();\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this3.renderImage();\n        });\n      }\n\n      if (this.played) {\n        if (this.options.fullscreen && this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n          this.stop();\n          return;\n        }\n\n        forEach(this.player.getElementsByTagName('img'), function (image) {\n          addListener(image, EVENT_LOAD, _this3.loadImage.bind(_this3), {\n            once: true\n          });\n          dispatchEvent(image, EVENT_LOAD);\n        });\n      }\n    },\n    wheel: function wheel(event) {\n      var _this4 = this;\n\n      if (!this.viewed) {\n        return;\n      }\n\n      event.preventDefault(); // Limit wheel speed to prevent zoom too fast\n\n      if (this.wheeling) {\n        return;\n      }\n\n      this.wheeling = true;\n      setTimeout(function () {\n        _this4.wheeling = false;\n      }, 50);\n      var ratio = Number(this.options.zoomRatio) || 0.1;\n      var delta = 1;\n\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n\n      this.zoom(-delta * ratio, true, event);\n    }\n  };\n\n  var methods = {\n    /** Show the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    show: function show() {\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.showing || this.isShown || this.showing) {\n        return this;\n      }\n\n      if (!this.ready) {\n        this.build();\n\n        if (this.ready) {\n          this.show(immediate);\n        }\n\n        return this;\n      }\n\n      if (isFunction(options.show)) {\n        addListener(element, EVENT_SHOW, options.show, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n        return this;\n      }\n\n      if (this.hiding) {\n        this.transitioning.abort();\n      }\n\n      this.showing = true;\n      this.open();\n      var viewer = this.viewer;\n      removeClass(viewer, CLASS_HIDE);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('aria-hidden');\n\n      if (options.transition && !immediate) {\n        var shown = this.shown.bind(this);\n        this.transitioning = {\n          abort: function abort() {\n            removeListener(viewer, EVENT_TRANSITION_END, shown);\n            removeClass(viewer, CLASS_IN);\n          }\n        };\n        addClass(viewer, CLASS_TRANSITION); // Force reflow to enable CSS3 transition\n\n        viewer.initialOffsetWidth = viewer.offsetWidth;\n        addListener(viewer, EVENT_TRANSITION_END, shown, {\n          once: true\n        });\n        addClass(viewer, CLASS_IN);\n      } else {\n        addClass(viewer, CLASS_IN);\n        this.shown();\n      }\n\n      return this;\n    },\n\n    /**\n     * Hide the viewer (only available in modal mode)\n     * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n     * @returns {Viewer} this\n     */\n    hide: function hide() {\n      var _this = this;\n\n      var immediate = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var element = this.element,\n          options = this.options;\n\n      if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n        return this;\n      }\n\n      if (isFunction(options.hide)) {\n        addListener(element, EVENT_HIDE, options.hide, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_HIDE) === false) {\n        return this;\n      }\n\n      if (this.showing) {\n        this.transitioning.abort();\n      }\n\n      this.hiding = true;\n\n      if (this.played) {\n        this.stop();\n      } else if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var viewer = this.viewer,\n          image = this.image;\n\n      var hideImmediately = function hideImmediately() {\n        removeClass(viewer, CLASS_IN);\n\n        _this.hidden();\n      };\n\n      if (options.transition && !immediate) {\n        var onViewerTransitionEnd = function onViewerTransitionEnd(event) {\n          // Ignore all propagating `transitionend` events (#275).\n          if (event && event.target === viewer) {\n            removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n\n            _this.hidden();\n          }\n        };\n\n        var onImageTransitionEnd = function onImageTransitionEnd() {\n          // In case of show the viewer by `viewer.show(true)` previously (#407).\n          if (hasClass(viewer, CLASS_TRANSITION)) {\n            addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            removeClass(viewer, CLASS_IN);\n          } else {\n            hideImmediately();\n          }\n        };\n\n        this.transitioning = {\n          abort: function abort() {\n            if (_this.viewed && hasClass(image, CLASS_TRANSITION)) {\n              removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n            } else if (hasClass(viewer, CLASS_TRANSITION)) {\n              removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n            }\n          }\n        }; // In case of hiding the viewer when holding on the image (#255),\n        // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n\n        if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n          addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n            once: true\n          });\n          this.zoomTo(0, false, false, true);\n        } else {\n          onImageTransitionEnd();\n        }\n      } else {\n        hideImmediately();\n      }\n\n      return this;\n    },\n\n    /**\n     * View one of the images with image's index\n     * @param {number} index - The index of the image to view.\n     * @returns {Viewer} this\n     */\n    view: function view() {\n      var _this2 = this;\n\n      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.options.initialViewIndex;\n      index = Number(index) || 0;\n\n      if (this.hiding || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {\n        return this;\n      }\n\n      if (!this.isShown) {\n        this.index = index;\n        return this.show();\n      }\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      var element = this.element,\n          options = this.options,\n          title = this.title,\n          canvas = this.canvas;\n      var item = this.items[index];\n      var img = item.querySelector('img');\n      var url = getData(img, 'originalUrl');\n      var alt = img.getAttribute('alt');\n      var image = document.createElement('img');\n      forEach(options.inheritedAttributes, function (name) {\n        var value = img.getAttribute(name);\n\n        if (value !== null) {\n          image.setAttribute(name, value);\n        }\n      });\n      image.src = url;\n      image.alt = alt;\n\n      if (isFunction(options.view)) {\n        addListener(element, EVENT_VIEW, options.view, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_VIEW, {\n        originalImage: this.images[index],\n        index: index,\n        image: image\n      }) === false || !this.isShown || this.hiding || this.played) {\n        return this;\n      }\n\n      var activeItem = this.items[this.index];\n      removeClass(activeItem, CLASS_ACTIVE);\n      activeItem.removeAttribute('aria-selected');\n      addClass(item, CLASS_ACTIVE);\n      item.setAttribute('aria-selected', true);\n\n      if (options.focus) {\n        item.focus();\n      }\n\n      this.image = image;\n      this.viewed = false;\n      this.index = index;\n      this.imageData = {};\n      addClass(image, CLASS_INVISIBLE);\n\n      if (options.loading) {\n        addClass(canvas, CLASS_LOADING);\n      }\n\n      canvas.innerHTML = '';\n      canvas.appendChild(image); // Center current item\n\n      this.renderList(); // Clear title\n\n      title.innerHTML = ''; // Generate title after viewed\n\n      var onViewed = function onViewed() {\n        var imageData = _this2.imageData;\n        var render = Array.isArray(options.title) ? options.title[1] : options.title;\n        title.innerHTML = escapeHTMLEntities(isFunction(render) ? render.call(_this2, image, imageData) : \"\".concat(alt, \" (\").concat(imageData.naturalWidth, \" \\xD7 \").concat(imageData.naturalHeight, \")\"));\n      };\n\n      var onLoad;\n      addListener(element, EVENT_VIEWED, onViewed, {\n        once: true\n      });\n      this.viewing = {\n        abort: function abort() {\n          removeListener(element, EVENT_VIEWED, onViewed);\n\n          if (image.complete) {\n            if (_this2.imageRendering) {\n              _this2.imageRendering.abort();\n            } else if (_this2.imageInitializing) {\n              _this2.imageInitializing.abort();\n            }\n          } else {\n            // Cancel download to save bandwidth.\n            image.src = '';\n            removeListener(image, EVENT_LOAD, onLoad);\n\n            if (_this2.timeout) {\n              clearTimeout(_this2.timeout);\n            }\n          }\n        }\n      };\n\n      if (image.complete) {\n        this.load();\n      } else {\n        addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n          once: true\n        });\n\n        if (this.timeout) {\n          clearTimeout(this.timeout);\n        } // Make the image visible if it fails to load within 1s\n\n\n        this.timeout = setTimeout(function () {\n          removeClass(image, CLASS_INVISIBLE);\n          _this2.timeout = false;\n        }, 1000);\n      }\n\n      return this;\n    },\n\n    /**\n     * View the previous image\n     * @param {boolean} [loop=false] - Indicate if view the last one\n     * when it is the first one at present.\n     * @returns {Viewer} this\n     */\n    prev: function prev() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var index = this.index - 1;\n\n      if (index < 0) {\n        index = loop ? this.length - 1 : 0;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * View the next image\n     * @param {boolean} [loop=false] - Indicate if view the first one\n     * when it is the last one at present.\n     * @returns {Viewer} this\n     */\n    next: function next() {\n      var loop = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var maxIndex = this.length - 1;\n      var index = this.index + 1;\n\n      if (index > maxIndex) {\n        index = loop ? 0 : maxIndex;\n      }\n\n      this.view(index);\n      return this;\n    },\n\n    /**\n     * Move the image with relative offsets.\n     * @param {number} x - The moving distance in the horizontal direction.\n     * @param {number} [y=x] The moving distance in the vertical direction.\n     * @returns {Viewer} this\n     */\n    move: function move(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var imageData = this.imageData;\n      this.moveTo(isUndefined(x) ? x : imageData.x + Number(x), isUndefined(y) ? y : imageData.y + Number(y));\n      return this;\n    },\n\n    /**\n     * Move the image to an absolute point.\n     * @param {number} x - The new position in the horizontal direction.\n     * @param {number} [y=x] - The new position in the vertical direction.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    moveTo: function moveTo(x) {\n      var _this3 = this;\n\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      x = Number(x);\n      y = Number(y);\n\n      if (this.viewed && !this.played && options.movable) {\n        var oldX = imageData.x;\n        var oldY = imageData.y;\n        var changed = false;\n\n        if (isNumber(x)) {\n          changed = true;\n        } else {\n          x = oldX;\n        }\n\n        if (isNumber(y)) {\n          changed = true;\n        } else {\n          y = oldY;\n        }\n\n        if (changed) {\n          if (isFunction(options.move)) {\n            addListener(element, EVENT_MOVE, options.move, {\n              once: true\n            });\n          }\n\n          if (dispatchEvent(element, EVENT_MOVE, {\n            x: x,\n            y: y,\n            oldX: oldX,\n            oldY: oldY,\n            originalEvent: _originalEvent\n          }) === false) {\n            return this;\n          }\n\n          imageData.x = x;\n          imageData.y = y;\n          imageData.left = x;\n          imageData.top = y;\n          this.moving = true;\n          this.renderImage(function () {\n            _this3.moving = false;\n\n            if (isFunction(options.moved)) {\n              addListener(element, EVENT_MOVED, options.moved, {\n                once: true\n              });\n            }\n\n            dispatchEvent(element, EVENT_MOVED, {\n              x: x,\n              y: y,\n              oldX: oldX,\n              oldY: oldY,\n              originalEvent: _originalEvent\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Rotate the image with a relative degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotate: function rotate(degree) {\n      this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n      return this;\n    },\n\n    /**\n     * Rotate the image to an absolute degree.\n     * @param {number} degree - The rotate degree.\n     * @returns {Viewer} this\n     */\n    rotateTo: function rotateTo(degree) {\n      var _this4 = this;\n\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      degree = Number(degree);\n\n      if (isNumber(degree) && this.viewed && !this.played && options.rotatable) {\n        var oldDegree = imageData.rotate;\n\n        if (isFunction(options.rotate)) {\n          addListener(element, EVENT_ROTATE, options.rotate, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_ROTATE, {\n          degree: degree,\n          oldDegree: oldDegree\n        }) === false) {\n          return this;\n        }\n\n        imageData.rotate = degree;\n        this.rotating = true;\n        this.renderImage(function () {\n          _this4.rotating = false;\n\n          if (isFunction(options.rotated)) {\n            addListener(element, EVENT_ROTATED, options.rotated, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_ROTATED, {\n            degree: degree,\n            oldDegree: oldDegree\n          }, {\n            cancelable: false\n          });\n        });\n      }\n\n      return this;\n    },\n\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Viewer} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      this.scale(_scaleX, this.imageData.scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      this.scale(this.imageData.scaleX, _scaleY);\n      return this;\n    },\n\n    /**\n     * Scale the image.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Viewer} this\n     */\n    scale: function scale(scaleX) {\n      var _this5 = this;\n\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var element = this.element,\n          options = this.options,\n          imageData = this.imageData;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n\n      if (this.viewed && !this.played && options.scalable) {\n        var oldScaleX = imageData.scaleX;\n        var oldScaleY = imageData.scaleY;\n        var changed = false;\n\n        if (isNumber(scaleX)) {\n          changed = true;\n        } else {\n          scaleX = oldScaleX;\n        }\n\n        if (isNumber(scaleY)) {\n          changed = true;\n        } else {\n          scaleY = oldScaleY;\n        }\n\n        if (changed) {\n          if (isFunction(options.scale)) {\n            addListener(element, EVENT_SCALE, options.scale, {\n              once: true\n            });\n          }\n\n          if (dispatchEvent(element, EVENT_SCALE, {\n            scaleX: scaleX,\n            scaleY: scaleY,\n            oldScaleX: oldScaleX,\n            oldScaleY: oldScaleY\n          }) === false) {\n            return this;\n          }\n\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n          this.scaling = true;\n          this.renderImage(function () {\n            _this5.scaling = false;\n\n            if (isFunction(options.scaled)) {\n              addListener(element, EVENT_SCALED, options.scaled, {\n                once: true\n              });\n            }\n\n            dispatchEvent(element, EVENT_SCALED, {\n              scaleX: scaleX,\n              scaleY: scaleY,\n              oldScaleX: oldScaleX,\n              oldScaleY: oldScaleY\n            }, {\n              cancelable: false\n            });\n          });\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Zoom the image with a relative ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @returns {Viewer} this\n     */\n    zoom: function zoom(ratio) {\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var imageData = this.imageData;\n      ratio = Number(ratio);\n\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n\n      this.zoomTo(imageData.width * ratio / imageData.naturalWidth, hasTooltip, _originalEvent);\n      return this;\n    },\n\n    /**\n     * Zoom the image to an absolute ratio.\n     * @param {number} ratio - The target ratio.\n     * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n     * @param {Event} [_originalEvent=null] - The original event if any.\n     * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n     * @returns {Viewer} this\n     */\n    zoomTo: function zoomTo(ratio) {\n      var _this6 = this;\n\n      var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      var _originalEvent = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      var _zoomable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      var element = this.element,\n          options = this.options,\n          pointers = this.pointers,\n          imageData = this.imageData;\n      var x = imageData.x,\n          y = imageData.y,\n          width = imageData.width,\n          height = imageData.height,\n          naturalWidth = imageData.naturalWidth,\n          naturalHeight = imageData.naturalHeight;\n      ratio = Math.max(0, ratio);\n\n      if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n        if (!_zoomable) {\n          var minZoomRatio = Math.max(0.01, options.minZoomRatio);\n          var maxZoomRatio = Math.min(100, options.maxZoomRatio);\n          ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n        }\n\n        if (_originalEvent && options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n          ratio = 1;\n        }\n\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        var offsetWidth = newWidth - width;\n        var offsetHeight = newHeight - height;\n        var oldRatio = width / naturalWidth;\n\n        if (isFunction(options.zoom)) {\n          addListener(element, EVENT_ZOOM, options.zoom, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: oldRatio,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n\n        this.zooming = true;\n\n        if (_originalEvent) {\n          var offset = getOffset(this.viewer);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          }; // Zoom from the triggering point of the event\n\n          imageData.x -= offsetWidth * ((center.pageX - offset.left - x) / width);\n          imageData.y -= offsetHeight * ((center.pageY - offset.top - y) / height);\n        } else {\n          // Zoom from the center of the image\n          imageData.x -= offsetWidth / 2;\n          imageData.y -= offsetHeight / 2;\n        }\n\n        imageData.left = imageData.x;\n        imageData.top = imageData.y;\n        imageData.width = newWidth;\n        imageData.height = newHeight;\n        imageData.ratio = ratio;\n        this.renderImage(function () {\n          _this6.zooming = false;\n\n          if (isFunction(options.zoomed)) {\n            addListener(element, EVENT_ZOOMED, options.zoomed, {\n              once: true\n            });\n          }\n\n          dispatchEvent(element, EVENT_ZOOMED, {\n            ratio: ratio,\n            oldRatio: oldRatio,\n            originalEvent: _originalEvent\n          }, {\n            cancelable: false\n          });\n        });\n\n        if (hasTooltip) {\n          this.tooltip();\n        }\n      }\n\n      return this;\n    },\n\n    /**\n     * Play the images\n     * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n     * @returns {Viewer} this\n     */\n    play: function play() {\n      var _this7 = this;\n\n      var fullscreen = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      if (!this.isShown || this.played) {\n        return this;\n      }\n\n      var element = this.element,\n          options = this.options;\n\n      if (isFunction(options.play)) {\n        addListener(element, EVENT_PLAY, options.play, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_PLAY) === false) {\n        return this;\n      }\n\n      var player = this.player;\n      var onLoad = this.loadImage.bind(this);\n      var list = [];\n      var total = 0;\n      var index = 0;\n      this.played = true;\n      this.onLoadWhenPlay = onLoad;\n\n      if (fullscreen) {\n        this.requestFullscreen();\n      }\n\n      addClass(player, CLASS_SHOW);\n      forEach(this.items, function (item, i) {\n        var img = item.querySelector('img');\n        var image = document.createElement('img');\n        image.src = getData(img, 'originalUrl');\n        image.alt = img.getAttribute('alt');\n        image.referrerPolicy = img.referrerPolicy;\n        total += 1;\n        addClass(image, CLASS_FADE);\n        toggleClass(image, CLASS_TRANSITION, options.transition);\n\n        if (hasClass(item, CLASS_ACTIVE)) {\n          addClass(image, CLASS_IN);\n          index = i;\n        }\n\n        list.push(image);\n        addListener(image, EVENT_LOAD, onLoad, {\n          once: true\n        });\n        player.appendChild(image);\n      });\n\n      if (isNumber(options.interval) && options.interval > 0) {\n        var play = function play() {\n          _this7.playing = setTimeout(function () {\n            removeClass(list[index], CLASS_IN);\n            index += 1;\n            index = index < total ? index : 0;\n            addClass(list[index], CLASS_IN);\n            play();\n          }, options.interval);\n        };\n\n        if (total > 1) {\n          play();\n        }\n      }\n\n      return this;\n    },\n    // Stop play\n    stop: function stop() {\n      var _this8 = this;\n\n      if (!this.played) {\n        return this;\n      }\n\n      var element = this.element,\n          options = this.options;\n\n      if (isFunction(options.stop)) {\n        addListener(element, EVENT_STOP, options.stop, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_STOP) === false) {\n        return this;\n      }\n\n      var player = this.player;\n      this.played = false;\n      clearTimeout(this.playing);\n      forEach(player.getElementsByTagName('img'), function (image) {\n        removeListener(image, EVENT_LOAD, _this8.onLoadWhenPlay);\n      });\n      removeClass(player, CLASS_SHOW);\n      player.innerHTML = '';\n      this.exitFullscreen();\n      return this;\n    },\n    // Enter modal mode (only available in inline mode)\n    full: function full() {\n      var _this9 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = true;\n      this.open();\n      addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      addClass(viewer, CLASS_FIXED);\n      viewer.setAttribute('role', 'dialog');\n      viewer.setAttribute('aria-labelledby', this.title.id);\n      viewer.setAttribute('aria-modal', true);\n      viewer.removeAttribute('style');\n      setStyle(viewer, {\n        zIndex: options.zIndex\n      });\n\n      if (options.focus) {\n        this.enforceFocus();\n      }\n\n      this.initContainer();\n      this.viewerData = assign({}, this.containerData);\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this9.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Exit modal mode (only available in inline mode)\n    exit: function exit() {\n      var _this10 = this;\n\n      var options = this.options,\n          viewer = this.viewer,\n          image = this.image,\n          list = this.list;\n\n      if (!this.isShown || this.played || !this.fulled || !options.inline) {\n        return this;\n      }\n\n      this.fulled = false;\n      this.close();\n      removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n      if (options.transition) {\n        removeClass(list, CLASS_TRANSITION);\n\n        if (this.viewed) {\n          removeClass(image, CLASS_TRANSITION);\n        }\n      }\n\n      if (options.focus) {\n        this.clearEnforceFocus();\n      }\n\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      removeClass(viewer, CLASS_FIXED);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline\n      });\n      this.viewerData = assign({}, this.parentData);\n      this.renderViewer();\n      this.renderList();\n\n      if (this.viewed) {\n        this.initImage(function () {\n          _this10.renderImage(function () {\n            if (options.transition) {\n              setTimeout(function () {\n                addClass(image, CLASS_TRANSITION);\n                addClass(list, CLASS_TRANSITION);\n              }, 0);\n            }\n          });\n        });\n      }\n\n      return this;\n    },\n    // Show the current ratio of the image with percentage\n    tooltip: function tooltip() {\n      var _this11 = this;\n\n      var options = this.options,\n          tooltipBox = this.tooltipBox,\n          imageData = this.imageData;\n\n      if (!this.viewed || this.played || !options.tooltip) {\n        return this;\n      }\n\n      tooltipBox.textContent = \"\".concat(Math.round(imageData.ratio * 100), \"%\");\n\n      if (!this.tooltipping) {\n        if (options.transition) {\n          if (this.fading) {\n            dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n          }\n\n          addClass(tooltipBox, CLASS_SHOW);\n          addClass(tooltipBox, CLASS_FADE);\n          addClass(tooltipBox, CLASS_TRANSITION);\n          tooltipBox.removeAttribute('aria-hidden'); // Force reflow to enable CSS3 transition\n\n          tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n          addClass(tooltipBox, CLASS_IN);\n        } else {\n          addClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.removeAttribute('aria-hidden');\n        }\n      } else {\n        clearTimeout(this.tooltipping);\n      }\n\n      this.tooltipping = setTimeout(function () {\n        if (options.transition) {\n          addListener(tooltipBox, EVENT_TRANSITION_END, function () {\n            removeClass(tooltipBox, CLASS_SHOW);\n            removeClass(tooltipBox, CLASS_FADE);\n            removeClass(tooltipBox, CLASS_TRANSITION);\n            tooltipBox.setAttribute('aria-hidden', true);\n            _this11.fading = false;\n          }, {\n            once: true\n          });\n          removeClass(tooltipBox, CLASS_IN);\n          _this11.fading = true;\n        } else {\n          removeClass(tooltipBox, CLASS_SHOW);\n          tooltipBox.setAttribute('aria-hidden', true);\n        }\n\n        _this11.tooltipping = false;\n      }, 1000);\n      return this;\n    },\n    // Toggle the image size between its natural size and initial size\n    toggle: function toggle() {\n      if (this.imageData.ratio === 1) {\n        this.zoomTo(this.initialImageData.ratio, true);\n      } else {\n        this.zoomTo(1, true);\n      }\n\n      return this;\n    },\n    // Reset the image to its initial state\n    reset: function reset() {\n      if (this.viewed && !this.played) {\n        this.imageData = assign({}, this.initialImageData);\n        this.renderImage();\n      }\n\n      return this;\n    },\n    // Update viewer when images changed\n    update: function update() {\n      var _this12 = this;\n\n      var element = this.element,\n          options = this.options,\n          isImg = this.isImg; // Destroy viewer if the target image was deleted\n\n      if (isImg && !element.parentNode) {\n        return this.destroy();\n      }\n\n      var images = [];\n      forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n        if (isFunction(options.filter)) {\n          if (options.filter.call(_this12, image)) {\n            images.push(image);\n          }\n        } else if (_this12.getImageURL(image)) {\n          images.push(image);\n        }\n      });\n\n      if (!images.length) {\n        return this;\n      }\n\n      this.images = images;\n      this.length = images.length;\n\n      if (this.ready) {\n        var changedIndexes = [];\n        forEach(this.items, function (item, i) {\n          var img = item.querySelector('img');\n          var image = images[i];\n\n          if (image && img) {\n            if (image.src !== img.src // Title changed (#408)\n            || image.alt !== img.alt) {\n              changedIndexes.push(i);\n            }\n          } else {\n            changedIndexes.push(i);\n          }\n        });\n        setStyle(this.list, {\n          width: 'auto'\n        });\n        this.initList();\n\n        if (this.isShown) {\n          if (this.length) {\n            if (this.viewed) {\n              var changedIndex = changedIndexes.indexOf(this.index);\n\n              if (changedIndex >= 0) {\n                this.viewed = false;\n                this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n              } else {\n                var activeItem = this.items[this.index]; // Reactivate the current viewing item after reset the list.\n\n                addClass(activeItem, CLASS_ACTIVE);\n                activeItem.setAttribute('aria-selected', true);\n              }\n            }\n          } else {\n            this.image = null;\n            this.viewed = false;\n            this.index = 0;\n            this.imageData = {};\n            this.canvas.innerHTML = '';\n            this.title.innerHTML = '';\n          }\n        }\n      } else {\n        this.build();\n      }\n\n      return this;\n    },\n    // Destroy the viewer\n    destroy: function destroy() {\n      var element = this.element,\n          options = this.options;\n\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n\n      this.destroyed = true;\n\n      if (this.ready) {\n        if (this.played) {\n          this.stop();\n        }\n\n        if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n\n          this.unbind();\n        } else if (this.isShown) {\n          if (this.viewing) {\n            if (this.imageRendering) {\n              this.imageRendering.abort();\n            } else if (this.imageInitializing) {\n              this.imageInitializing.abort();\n            }\n          }\n\n          if (this.hiding) {\n            this.transitioning.abort();\n          }\n\n          this.hidden();\n        } else if (this.showing) {\n          this.transitioning.abort();\n          this.hidden();\n        }\n\n        this.ready = false;\n        this.viewer.parentNode.removeChild(this.viewer);\n      } else if (options.inline) {\n        if (this.delaying) {\n          this.delaying.abort();\n        } else if (this.initializing) {\n          this.initializing.abort();\n        }\n      }\n\n      if (!options.inline) {\n        removeListener(element, EVENT_CLICK, this.onStart);\n      }\n\n      element[NAMESPACE] = undefined;\n      return this;\n    }\n  };\n\n  var others = {\n    getImageURL: function getImageURL(image) {\n      var url = this.options.url;\n\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(this, image);\n      } else {\n        url = '';\n      }\n\n      return url;\n    },\n    enforceFocus: function enforceFocus() {\n      var _this = this;\n\n      this.clearEnforceFocus();\n      addListener(document, EVENT_FOCUSIN, this.onFocusin = function (_ref) {\n        var target = _ref.target;\n        var viewer = _this.viewer;\n\n        if (target !== document && target !== viewer && !viewer.contains(target)) {\n          viewer.focus();\n        }\n      });\n    },\n    clearEnforceFocus: function clearEnforceFocus() {\n      if (this.onFocusin) {\n        removeListener(document, EVENT_FOCUSIN, this.onFocusin);\n        this.onFocusin = null;\n      }\n    },\n    open: function open() {\n      var body = this.body;\n      addClass(body, CLASS_OPEN);\n      body.style.paddingRight = \"\".concat(this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0), \"px\");\n    },\n    close: function close() {\n      var body = this.body;\n      removeClass(body, CLASS_OPEN);\n      body.style.paddingRight = this.initialBodyPaddingRight;\n    },\n    shown: function shown() {\n      var element = this.element,\n          options = this.options,\n          viewer = this.viewer;\n      this.fulled = true;\n      this.isShown = true;\n      this.render();\n      this.bind();\n      this.showing = false;\n\n      if (options.focus) {\n        viewer.focus();\n        this.enforceFocus();\n      }\n\n      if (isFunction(options.shown)) {\n        addListener(element, EVENT_SHOWN, options.shown, {\n          once: true\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_SHOWN) === false) {\n        return;\n      }\n\n      if (this.ready && this.isShown && !this.hiding) {\n        this.view(this.index);\n      }\n    },\n    hidden: function hidden() {\n      var element = this.element,\n          options = this.options,\n          viewer = this.viewer;\n\n      if (options.fucus) {\n        this.clearEnforceFocus();\n      }\n\n      this.fulled = false;\n      this.viewed = false;\n      this.isShown = false;\n      this.close();\n      this.unbind();\n      addClass(viewer, CLASS_HIDE);\n      viewer.removeAttribute('role');\n      viewer.removeAttribute('aria-labelledby');\n      viewer.removeAttribute('aria-modal');\n      viewer.setAttribute('aria-hidden', true);\n      this.resetList();\n      this.resetImage();\n      this.hiding = false;\n\n      if (!this.destroyed) {\n        if (isFunction(options.hidden)) {\n          addListener(element, EVENT_HIDDEN, options.hidden, {\n            once: true\n          });\n        }\n\n        dispatchEvent(element, EVENT_HIDDEN, null, {\n          cancelable: false\n        });\n      }\n    },\n    requestFullscreen: function requestFullscreen() {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && !(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        var documentElement = document.documentElement; // Element.requestFullscreen()\n\n        if (documentElement.requestFullscreen) {\n          documentElement.requestFullscreen();\n        } else if (documentElement.webkitRequestFullscreen) {\n          documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n        } else if (documentElement.mozRequestFullScreen) {\n          documentElement.mozRequestFullScreen();\n        } else if (documentElement.msRequestFullscreen) {\n          documentElement.msRequestFullscreen();\n        }\n      }\n    },\n    exitFullscreen: function exitFullscreen() {\n      var document = this.element.ownerDocument;\n\n      if (this.fulled && (document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)) {\n        // Document.exitFullscreen()\n        if (document.exitFullscreen) {\n          document.exitFullscreen();\n        } else if (document.webkitExitFullscreen) {\n          document.webkitExitFullscreen();\n        } else if (document.mozCancelFullScreen) {\n          document.mozCancelFullScreen();\n        } else if (document.msExitFullscreen) {\n          document.msExitFullscreen();\n        }\n      }\n    },\n    change: function change(event) {\n      var options = this.options,\n          pointers = this.pointers;\n      var pointer = pointers[Object.keys(pointers)[0]]; // In the case of the `pointers` object is empty (#421)\n\n      if (!pointer) {\n        return;\n      }\n\n      var offsetX = pointer.endX - pointer.startX;\n      var offsetY = pointer.endY - pointer.startY;\n\n      switch (this.action) {\n        // Move the current image\n        case ACTION_MOVE:\n          this.move(offsetX, offsetY, event);\n          break;\n        // Zoom the current image\n\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), false, event);\n          break;\n\n        case ACTION_SWITCH:\n          {\n            this.action = 'switched';\n            var absoluteOffsetX = Math.abs(offsetX);\n\n            if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n              // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n              this.pointers = {};\n\n              if (offsetX > 1) {\n                this.prev(options.loop);\n              } else if (offsetX < -1) {\n                this.next(options.loop);\n              }\n            }\n\n            break;\n          }\n      } // Override\n\n\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    },\n    isSwitchable: function isSwitchable() {\n      var imageData = this.imageData,\n          viewerData = this.viewerData;\n      return this.length > 1 && imageData.x >= 0 && imageData.y >= 0 && imageData.width <= viewerData.width && imageData.height <= viewerData.height;\n    }\n  };\n\n  var AnotherViewer = WINDOW.Viewer;\n\n  var getUniqueID = function (id) {\n    return function () {\n      id += 1;\n      return id;\n    };\n  }(-1);\n\n  var Viewer = /*#__PURE__*/function () {\n    /**\n     * Create a new Viewer.\n     * @param {Element} element - The target element for viewing.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Viewer(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, Viewer);\n\n      if (!element || element.nodeType !== 1) {\n        throw new Error('The first argument is required and must be an element.');\n      }\n\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.action = false;\n      this.fading = false;\n      this.fulled = false;\n      this.hiding = false;\n      this.imageClicked = false;\n      this.imageData = {};\n      this.index = this.options.initialViewIndex;\n      this.isImg = false;\n      this.isShown = false;\n      this.length = 0;\n      this.moving = false;\n      this.played = false;\n      this.playing = false;\n      this.pointers = {};\n      this.ready = false;\n      this.rotating = false;\n      this.scaling = false;\n      this.showing = false;\n      this.timeout = false;\n      this.tooltipping = false;\n      this.viewed = false;\n      this.viewing = false;\n      this.wheeling = false;\n      this.zooming = false;\n      this.id = getUniqueID();\n      this.init();\n    }\n\n    _createClass(Viewer, [{\n      key: \"init\",\n      value: function init() {\n        var _this = this;\n\n        var element = this.element,\n            options = this.options;\n\n        if (element[NAMESPACE]) {\n          return;\n        }\n\n        element[NAMESPACE] = this; // The `focus` option requires the `keyboard` option set to `true`.\n\n        if (options.focus && !options.keyboard) {\n          options.focus = false;\n        }\n\n        var isImg = element.localName === 'img';\n        var images = [];\n        forEach(isImg ? [element] : element.querySelectorAll('img'), function (image) {\n          if (isFunction(options.filter)) {\n            if (options.filter.call(_this, image)) {\n              images.push(image);\n            }\n          } else if (_this.getImageURL(image)) {\n            images.push(image);\n          }\n        });\n        this.isImg = isImg;\n        this.length = images.length;\n        this.images = images;\n        this.initBody(); // Override `transition` option if it is not supported\n\n        if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n          options.transition = false;\n        }\n\n        if (options.inline) {\n          var count = 0;\n\n          var progress = function progress() {\n            count += 1;\n\n            if (count === _this.length) {\n              var timeout;\n              _this.initializing = false;\n              _this.delaying = {\n                abort: function abort() {\n                  clearTimeout(timeout);\n                }\n              }; // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n\n              timeout = setTimeout(function () {\n                _this.delaying = false;\n\n                _this.build();\n              }, 0);\n            }\n          };\n\n          this.initializing = {\n            abort: function abort() {\n              forEach(images, function (image) {\n                if (!image.complete) {\n                  removeListener(image, EVENT_LOAD, progress);\n                }\n              });\n            }\n          };\n          forEach(images, function (image) {\n            if (image.complete) {\n              progress();\n            } else {\n              addListener(image, EVENT_LOAD, progress, {\n                once: true\n              });\n            }\n          });\n        } else {\n          addListener(element, EVENT_CLICK, this.onStart = function (_ref) {\n            var target = _ref.target;\n\n            if (target.localName === 'img' && (!isFunction(options.filter) || options.filter.call(_this, target))) {\n              _this.view(_this.images.indexOf(target));\n            }\n          });\n        }\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (this.ready) {\n          return;\n        }\n\n        var element = this.element,\n            options = this.options;\n        var parent = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var viewer = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var title = viewer.querySelector(\".\".concat(NAMESPACE, \"-title\"));\n        var toolbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-toolbar\"));\n        var navbar = viewer.querySelector(\".\".concat(NAMESPACE, \"-navbar\"));\n        var button = viewer.querySelector(\".\".concat(NAMESPACE, \"-button\"));\n        var canvas = viewer.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        this.parent = parent;\n        this.viewer = viewer;\n        this.title = title;\n        this.toolbar = toolbar;\n        this.navbar = navbar;\n        this.button = button;\n        this.canvas = canvas;\n        this.footer = viewer.querySelector(\".\".concat(NAMESPACE, \"-footer\"));\n        this.tooltipBox = viewer.querySelector(\".\".concat(NAMESPACE, \"-tooltip\"));\n        this.player = viewer.querySelector(\".\".concat(NAMESPACE, \"-player\"));\n        this.list = viewer.querySelector(\".\".concat(NAMESPACE, \"-list\"));\n        viewer.id = \"\".concat(NAMESPACE).concat(this.id);\n        title.id = \"\".concat(NAMESPACE, \"Title\").concat(this.id);\n        addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title) ? options.title[0] : options.title));\n        addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n        toggleClass(button, CLASS_HIDE, !options.button);\n\n        if (options.keyboard) {\n          button.setAttribute('tabindex', 0);\n        }\n\n        if (options.backdrop) {\n          addClass(viewer, \"\".concat(NAMESPACE, \"-backdrop\"));\n\n          if (!options.inline && options.backdrop !== 'static') {\n            setData(canvas, DATA_ACTION, 'hide');\n          }\n        }\n\n        if (isString(options.className) && options.className) {\n          // In case there are multiple class names\n          options.className.split(REGEXP_SPACES).forEach(function (className) {\n            addClass(viewer, className);\n          });\n        }\n\n        if (options.toolbar) {\n          var list = document.createElement('ul');\n          var custom = isPlainObject(options.toolbar);\n          var zoomButtons = BUTTONS.slice(0, 3);\n          var rotateButtons = BUTTONS.slice(7, 9);\n          var scaleButtons = BUTTONS.slice(9);\n\n          if (!custom) {\n            addClass(toolbar, getResponsiveClass(options.toolbar));\n          }\n\n          forEach(custom ? options.toolbar : BUTTONS, function (value, index) {\n            var deep = custom && isPlainObject(value);\n            var name = custom ? hyphenate(index) : value;\n            var show = deep && !isUndefined(value.show) ? value.show : value;\n\n            if (!show || !options.zoomable && zoomButtons.indexOf(name) !== -1 || !options.rotatable && rotateButtons.indexOf(name) !== -1 || !options.scalable && scaleButtons.indexOf(name) !== -1) {\n              return;\n            }\n\n            var size = deep && !isUndefined(value.size) ? value.size : value;\n            var click = deep && !isUndefined(value.click) ? value.click : value;\n            var item = document.createElement('li');\n\n            if (options.keyboard) {\n              item.setAttribute('tabindex', 0);\n            }\n\n            item.setAttribute('role', 'button');\n            addClass(item, \"\".concat(NAMESPACE, \"-\").concat(name));\n\n            if (!isFunction(click)) {\n              setData(item, DATA_ACTION, name);\n            }\n\n            if (isNumber(show)) {\n              addClass(item, getResponsiveClass(show));\n            }\n\n            if (['small', 'large'].indexOf(size) !== -1) {\n              addClass(item, \"\".concat(NAMESPACE, \"-\").concat(size));\n            } else if (name === 'play') {\n              addClass(item, \"\".concat(NAMESPACE, \"-large\"));\n            }\n\n            if (isFunction(click)) {\n              addListener(item, EVENT_CLICK, click);\n            }\n\n            list.appendChild(item);\n          });\n          toolbar.appendChild(list);\n        } else {\n          addClass(toolbar, CLASS_HIDE);\n        }\n\n        if (!options.rotatable) {\n          var rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n          addClass(rotates, CLASS_INVISIBLE);\n          forEach(rotates, function (rotate) {\n            toolbar.appendChild(rotate);\n          });\n        }\n\n        if (options.inline) {\n          addClass(button, CLASS_FULLSCREEN);\n          setStyle(viewer, {\n            zIndex: options.zIndexInline\n          });\n\n          if (window.getComputedStyle(parent).position === 'static') {\n            setStyle(parent, {\n              position: 'relative'\n            });\n          }\n\n          parent.insertBefore(viewer, element.nextSibling);\n        } else {\n          addClass(button, CLASS_CLOSE);\n          addClass(viewer, CLASS_FIXED);\n          addClass(viewer, CLASS_FADE);\n          addClass(viewer, CLASS_HIDE);\n          setStyle(viewer, {\n            zIndex: options.zIndex\n          });\n          var container = options.container;\n\n          if (isString(container)) {\n            container = element.ownerDocument.querySelector(container);\n          }\n\n          if (!container) {\n            container = this.body;\n          }\n\n          container.appendChild(viewer);\n        }\n\n        if (options.inline) {\n          this.render();\n          this.bind();\n          this.isShown = true;\n        }\n\n        this.ready = true;\n\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n\n        if (dispatchEvent(element, EVENT_READY) === false) {\n          this.ready = false;\n          return;\n        }\n\n        if (this.ready && options.inline) {\n          this.view(this.index);\n        }\n      }\n      /**\n       * Get the no conflict viewer class.\n       * @returns {Viewer} The viewer class.\n       */\n\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Viewer = AnotherViewer;\n        return Viewer;\n      }\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n\n    return Viewer;\n  }();\n\n  assign(Viewer.prototype, render, events, handlers, methods, others);\n\n  return Viewer;\n\n})));\n","// extracted by mini-css-extract-plugin\nexport {};"],"sourceRoot":""}